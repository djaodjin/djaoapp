{% extends "login/base.html" %}

{% block localheader_title %}{% trans %}Get started!{% endtrans %}{% endblock %}

{% block accounts_title %}{% trans %}Get started!{% endtrans %}{% endblock %}

{% block accounts_content %}
<div>
  {% if form %}
  {% block activate_form %}
  <form{% if form.form_id %} id="{{form.form_id}}"{% endif %} method="post" action=".{% if query %}/?{{query}}{% endif %}">

    {% if requires_registration or form['new_password'] %}
    <p>
{% trans %}Please share a little more information about yourself, and set a password to access your account in the future.{% endtrans %}
    </p>
    {% block register_form %}
    {% include "login/_register_form_fields.html" %}
    {% endblock %}
    {% else %}
    {% include "login/_index_form.html" %}
    {% endif %}

    <div class="form-action text-center mt-2">
      <div class="d-grid gap-2">
        {% if not form['password'] and check_email %}
        <button id="email-verification-link" type="submit" name="check_email" value="1" class="btn btn-primary btn-md">{% trans %}E-mail me a verification code{% endtrans %}</button>
        {% elif not form['password'] and check_phone %}
        <button id="phone-verification-link" type="submit" name="check_phone" value="1" class="btn btn-primary btn-md">{% trans %}Text me a code or a link{% endtrans %}</button>
        {% elif form['email_code'] and not form['email_code'].value %}
        <button type="submit" class="btn btn-primary btn-md">
            {% trans %}Verify Email Address{% endtrans %}
        </button>
        <div class="form-text help-block">
          <small class="text-muted">{% trans %}Not seeing the email in your inbox? try the {% endtrans %}<a href="{{'/docs/faq/'|site_url}}">FAQ</a></small>
        </div>
        {% elif form['phone_code'] and not form['phone_code'].value %}
        <button type="submit" class="btn btn-primary btn-md">
            {% trans %}Verify Phone Number{% endtrans %}
        </button>
        <div class="form-text help-block">
          <small class="text-muted">{% trans %}Not seeing the text message? try the {% endtrans %}<a href="{{'/docs/faq/'|site_url}}">FAQ</a></small>
        </div>
        {% elif form['new_password'] %}
        <button type="submit" class="btn btn-primary btn-md">
            {% trans %}Sign Up{% endtrans %}
        </button>
        {% else %}
        <button type="submit" class="btn btn-primary btn-md">
            {% trans %}Continue{% endtrans %} &raquo;
        </button>
        {% endif %}
      </div>
    </div>

  </form>
  {% if form['password'] and check_email %}
  <hr />
  <div class="text-center">
    <p>
      Or
    </p>
    <form method="post" action=".{% if query %}/?{{query}}{% endif %}">
      <input type="hidden" name="csrfmiddlewaretoken" value="{{csrf_token}}">
      <input type="hidden" name="check_email" value="1">
      <input type="hidden" name="username" value="{{form['username'].value()}}">
      <div class="form-action text-center mt-2">
        <div class="d-grid gap-2">
          <button id="email-verification-link" class="btn btn-outline-primary btn-md" type="submit" name="check_email" value="1">{% trans %}E-mail me a verification code{% endtrans %}</button>
        </div>
      </div>
    </form>
  </div>
  {% elif form['password'] and check_phone %}
  <hr />
  <div class="text-center">
    <p>
      Or
    </p>
    <form method="post" action=".{% if query %}/?{{query}}{% endif %}">
      <input type="hidden" name="csrfmiddlewaretoken" value="{{csrf_token}}">
      <input type="hidden" name="check_phone" value="1">
      <input type="hidden" name="username" value="{{form['username'].value()}}">
      <div class="form-action text-center mt-2">
        <div class="d-grid gap-2">
          <button id="phone-verification-link" class="btn btn-outline-primary btn-md" type="submit" name="check_phone" value="1">{% trans %}Text me a code or a link{% endtrans %}</button>
        </div>
      </div>
    </form>
  </div>
  {% endif %}
  {% endblock %}
  {% endif %}
</div>
{% endblock %}

{% block accounts_scripts %}
{% include "_password_strength_scripts.html" %}
{% endblock %}
